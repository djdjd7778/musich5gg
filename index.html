<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>h5ggéŸ³æ¥½</title>
  <style>
    body { font-family: system-ui, sans-serif; text-align: center; padding:50px; background:#f0f0f0; }
    button { font-size:16px; margin:5px; padding:8px 16px; cursor:pointer; }
    .track-btn { background:#ffffff; }
    .track-btn.playing { background:#a0e0a0; }
  </style>
</head>
<body>
  <h1>éŸ³æ¥½å†ç”Ÿ</h1>
  <audio id="player" controls autoplay></audio>
  <br>
  <button id="prevBtn">â® å‰ã®æ›²</button>
  <button id="nextBtn">â­ æ¬¡ã®æ›²</button>
  <button id="playBtn">â–¶ å†ç”Ÿ</button>
  <button id="pauseBtn">â¸ åœæ­¢</button>
  <button id="volBtn">ğŸ”Š éŸ³é‡èª¿æ•´</button>
  <div id="trackButtons"></div>

  <script>
    const player = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const volBtn = document.getElementById('volBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const trackButtonsDiv = document.getElementById('trackButtons');

    const tracks = [
      "music/music1.mp3","music/music2.mp3","music/music3.mp3","music/music4.mp3","music/music5.mp3",
      "music/music6.mp3","music/music7.mp3","music/music8.mp3","music/music9.mp3","music/music10.mp3",
      "music/music11.mp3","music/music12.mp3","music/music13.mp3","music/music14.mp3","music/music15.mp3",
      "music/music16.mp3","music/music17.mp3","music/music18.mp3","music/music19.mp3","music/music20.mp3",
      "music/music21.mp3","music/music22.mp3","music/music23.mp3","music/music24.mp3","music/music25.mp3",
      "music/music26.mp3","music/music27.mp3"
    ];

    let currentTrack = 0;
    player.src = tracks[currentTrack];
    player.loop = false;

    // æ›²ãŒçµ‚ã‚ã£ãŸã‚‰æ¬¡ã®æ›²ã¸
    player.addEventListener('ended', () => { nextTrack(); });

    // ãƒœã‚¿ãƒ³æ“ä½œ
    playBtn.addEventListener('click',()=>{player.play();});
    pauseBtn.addEventListener('click',()=>{player.pause();});
    volBtn.addEventListener('click',()=>{
      let vol=prompt("éŸ³é‡ã‚’0ã€œ1ã§å…¥åŠ›ã—ã¦ãã ã•ã„",player.volume);
      if(vol!==null){
        let v=parseFloat(vol);
        if(!isNaN(v) && v>=0 && v<=1){ player.volume=v; }
      }
    });

    prevBtn.addEventListener('click', ()=>{ prevTrack(); });
    nextBtn.addEventListener('click', ()=>{ nextTrack(); });

    // æ›²ãƒœã‚¿ãƒ³ç”Ÿæˆ
    const trackButtons = [];
    for(let i=0;i<tracks.length;i++){
      const btn = document.createElement('button');
      btn.textContent = i+1;
      btn.className = "track-btn";
      btn.addEventListener('click',()=>{ selectTrack(i); });
      trackButtonsDiv.appendChild(btn);
      trackButtons.push(btn);
    }

    function updateTrackButtons(){
      trackButtons.forEach((btn,index)=>{
        if(index === currentTrack){
          btn.classList.add('playing');
        } else {
          btn.classList.remove('playing');
        }
      });
    }

    function selectTrack(index){
      currentTrack = index;
      player.src = tracks[currentTrack];
      player.play().catch(()=>{});
      updateTrackButtons();
    }

    function nextTrack(){
      currentTrack = (currentTrack + 1) % tracks.length;
      player.src = tracks[currentTrack];
      player.play().catch(()=>{});
      updateTrackButtons();
    }

    function prevTrack(){
      currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
      player.src = tracks[currentTrack];
      player.play().catch(()=>{});
      updateTrackButtons();
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•å†ç”Ÿã‚’è©¦ã¿ã‚‹
    window.addEventListener('load', () => {
      player.play().catch(()=>{});
      updateTrackButtons();
    });
  </script>
</body>
</html>
